<!DOCTYPE html>

<html>
    <head>
       
       
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <link rel="stylesheet" type="text/css" href="../css/login.css">
         <link rel="stylesheet" type="text/css" href="../css/login2.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="../css/forAll.css">   
        <title>Forgot Password</title>

    </head>
    <style>
      .signin-form h2:before, .signin-form h2:after{
        width:10%;
      }
     
    </style>

     <script>
    const disableButton = ()=>{
            const button = document.getElementById("getPassword");
            button.innerText= "Validating...";
            button.disabled = true;
            
        }

        const enableButton = ()=>{
            const button = document.getElementById("getPassword");
            button.innerText= "Get Password";
            button.disabled = false;
        }

      function emailNotRegistered(){
        var email = document.getElementById('email');

        email.classList.add('is-invalid');
        enableButton();
      }

      function passwordSent(){
        var email = document.getElementById('email');

        email.classList.add('is-valid');
        const button = document.getElementById("getPassword");
            button.innerText= "Send Password Again";
            button.disabled=false;
      }

       function test(){

         event.preventDefault();
         disableButton();

         var xhr = new XMLHttpRequest();
        xhr.withCredentials = true;

      xhr.addEventListener("readystatechange", function() {
        if(this.readyState === 4) {
          if(this.responseText!='')
          emailNotRegistered();
          else passwordSent();
          console.log(this.responseText);
        }
      });

      var email = document.getElementById('email');

      email.classList.remove('is-invalid');
      email.classList.remove('is-valid');

      xhr.open("POST", "https://connectingit.in/ords/shoppergoldeneye/core/patient_forgotpassword/");
      xhr.setRequestHeader("email", email.value);

      xhr.send();
    }
     </script>
    <body>

      <div class="centre_box">

      <div class="signin-form">
        <form onsubmit="test();" method="post">
            <img src="../img\avatar.jpg" id="profile_pic">
            <h2 >Forgot Password</h2>
            <div class="form-group">
                <input type="email" class="form-control" placeholder="Email ID" required id="email"/>
                <div class="invalid-feedback">
                  Email Not Registered
                </div>
                <div class="valid-feedback">
                  Password Sent on Email
                </div>
                </div>
            <div class="form-group">
                <button id="getPassword" type="submit" class="btn btn-main btn-lg btn-block">Get Password</button>
            </div>
            <hr>
            <div class="text-center" >Back to <a href="../Patient/login2.html" class="signup-button">Patient Login</a></div>
            
        </form>
    </div>
  </div>

    </div>
  </div>

        <script type="text/javascript" src="../cordova.js"></script>
        <script type="text/javascript" src="../js/login.js"></script>
    </body>
</html>
