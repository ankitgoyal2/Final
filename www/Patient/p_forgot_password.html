<!DOCTYPE html>

<html>
    <head>
       
      <link rel = "icon" type = "image/png" href = "../img/patientIcon.png">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <link rel="stylesheet" type="text/css" href="../css/login.css">
         <link rel="stylesheet" type="text/css" href="../css/login2.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="../css/forAll.css">   
        <title>Forgot Password</title>

    </head>
    <style>
      .signin-form h2:before, .signin-form h2:after{
        width:10%;
      }
     
    </style>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
     <script>
    const disableButton = ()=>{
            const button = document.getElementById("getPassword");
            button.innerText= "Validating...";
            button.disabled = true;
            
        }

        const enableButton = ()=>{
            const button = document.getElementById("getPassword");
            button.innerText= "Get Password";
            button.disabled = false;
        }

      


       function test(){
         
         event.preventDefault();
         disableButton();

         const email = document.getElementById('email').value;

          data = { email };
          axios.post('http://aqueous-spire-38105.herokuapp.com/p/forgot-password', data)
          .then(res=>{
            window.alert(res.data.msg);
            enableButton();
            window.location = 'login2.html';
          })
          .catch(err=>{
            
            console.log(err);
            window.alert('Email not registered');
            enableButton();
          });

      
    }
     </script>
    <body>

      <div class="centre_box">

      <div class="signin-form">
        <form onsubmit="test();" method="post">
            <img src="../img\avatar.jpg" id="profile_pic">
            <h2 >Forgot Password</h2>
            <div class="form-group">
                <input type="email" class="form-control" placeholder="Email ID" id="email" required/>
            </div>
            <div class="form-group">
                <button id="getPassword" type="submit" class="btn btn-main btn-lg btn-block">Get Password</button>
            </div>
            <hr>
            <div class="text-center" >Back to <a href="login2.html" class="signup-button">Patient Login</a></div>
            
        </form>
    </div>
  </div>

    </div>
  </div>

        <script type="text/javascript" src="../cordova.js"></script>
        <script type="text/javascript" src="../js/login.js"></script>
    </body>
</html>
